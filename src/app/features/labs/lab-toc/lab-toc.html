@if (isOpen() && !isDesktop()) {
  <button class="toc-backdrop" type="button" (click)="closeToc()" aria-label="Close table of contents"></button>
}

<details
  class="toc-collapsible"
  [class.is-open]="isOpen() || isDesktop()"
  [attr.open]="isOpen() || isDesktop() ? '' : null"
  (toggle)="onToggle($event)"
>
  <summary class="toc-summary">
    @if (isOpen()) {
      <span>On this page</span>
    } @else {
      <span>{{ activeLabel() }}</span>
    }
  </summary>

  <nav class="toc" aria-label="Lab sections">
    <ol>
      @for (section of sections(); track section.id) {
        <li>
          <a
            [attr.href]="'#' + section.id"
            [class.is-active]="activeId() === section.id"
            (click)="onLinkClick($event, section.id)"
          >
            {{ section.title }}
          </a>
        </li>
      }
    </ol>
  </nav>
</details>
