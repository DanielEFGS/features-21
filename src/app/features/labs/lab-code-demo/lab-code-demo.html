<section class="demo" [attr.id]="sectionId() || demoId()">
  <header class="demo-header">
    <div class="header-text">
      <p class="eyebrow">Demo</p>
      <h2>{{ title() }}</h2>
      @if (description()) {
        <p class="description">{{ description() }}</p>
      }
    </div>
  </header>

  <div class="demo-grid">
    <div class="preview">
      <div class="preview-frame">
        <ng-content select="[labDemoPreview]"></ng-content>
      </div>
    </div>

    <div class="code">
      <div class="tablist" role="tablist" aria-label="Code samples">
        @for (tab of tabs(); track tab.id) {
          <button
            type="button"
            class="tab"
            role="tab"
            [attr.id]="tabId(tab)"
            [attr.aria-selected]="activeTabId() === tab.id"
            [attr.aria-controls]="panelId(tab)"
            [class.is-active]="activeTabId() === tab.id"
            (click)="selectTab(tab.id)"
          >
            {{ tab.label }}
          </button>
        }
      </div>

      @if (tabs().length === 0) {
        <p class="empty">No code available yet.</p>
      } @else {
        @for (tab of tabs(); track tab.id) {
          <div
            class="tab-panel"
            role="tabpanel"
            [attr.id]="panelId(tab)"
            [attr.aria-labelledby]="tabId(tab)"
            [attr.aria-hidden]="activeTabId() !== tab.id"
            [hidden]="activeTabId() !== tab.id"
          >
          <pre [attr.data-language]="tab.language" [class]="languageClass(tab)"><code [class]="languageClass(tab)">{{ tab.code.trim() }}</code></pre>
        </div>
      }
      }
    </div>
  </div>
</section>
